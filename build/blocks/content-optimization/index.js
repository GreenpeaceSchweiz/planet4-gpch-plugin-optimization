(()=>{"use strict";var t,e={886:()=>{const t=window.wp.blocks,e=window.wp.i18n,i=window.wp.blockEditor,n=window.wp.data,a=window.wp.primitives,o=window.ReactJSXRuntime,s=(0,o.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,o.jsx)(a.Path,{d:"M2 12C2 6.44444 6.44444 2 12 2C17.5556 2 22 6.44444 22 12C22 17.5556 17.5556 22 12 22C6.44444 22 2 17.5556 2 12ZM13 11V7H11V11H7V13H11V17H13V13H17V11H13Z"})}),l=window.wp.components;function r(){return(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",className:"icon",viewBox:"0 0 30.7 30.7",children:[(0,o.jsx)("path",{fill:"#131313",d:"M30 30.7h-8V3.5a1.6 1.6 0 0 1 1.6-1.6h4.7c1 0 1.6.8 1.6 1.6v27.2Zm-6.7-1.3h5.3V3.5c0-.2-.1-.3-.2-.3h-4.8l-.2.1v26.1Zm-4 1.3h-8V10c0-.8.7-1.4 1.5-1.4h5c.9 0 1.5.6 1.5 1.4v20.7Zm-6.6-1.3H18V10l-.2-.1h-5l-.2.1v19.4zm-4 1.3h-8V16.4c0-.8.7-1.3 1.4-1.3h5.3c.7 0 1.3.5 1.3 1.3zm-6.6-1.3h5.3v-13H2.1Z"}),(0,o.jsx)("path",{fill:"#121212",d:"M22.9 2.7h6.3v27h-6.3z"})]})}const c=[["planet4-gpch-plugin-optimize/variant",{variantName:"Variant A"}],["planet4-gpch-plugin-optimize/variant",{variantName:"Variant B"}]],p=JSON.parse('{"UU":"planet4-gpch-plugin-optimize/content-optimization"}');(0,t.registerBlockType)(p.UU,{icon:function(){return(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"800",height:"800",className:"icon",viewBox:"0 0 1024 1024",children:[(0,o.jsx)("path",{fill:"#131313",d:"M1009 1023H738V95a53 53 0 0 1 54-54h163c30 0 53 25 53 54v928zm-226-45h182V95c0-5-5-9-9-9H793c-3 0-5 1-6 3-2 1-3 3-3 6v883zm-139 46H374V318c0-28 23-49 51-49h171c28 0 50 22 50 49v706zm-225-45h182V318c0-2-3-4-6-4H424c-3 0-6 2-6 4v661zm-134 44H13V534c0-24 21-44 45-44h182c24 0 45 20 45 44v489zM58 978h182V534H58v444zm324-740c-12-3-20-15-17-27l28-112-113-28c-12-3-19-15-17-27 3-12 16-19 28-16l155 38-38 156c-2 12-14 19-26 16z"}),(0,o.jsx)("path",{fill:"#131313",d:"M83 307c-5-2-10-5-13-11-7-11-4-24 7-30L408 65c11-7 24-4 31 7 6 11 3 24-8 31L100 304c-5 3-11 4-17 3z"}),(0,o.jsx)("path",{fill:"#121212",d:"M771 76h204v921H771zM54 509h197v491H54zm355-204h215v688H409z"})]})},edit:function({clientId:t,attributes:a,setAttributes:p}){const{status:h}=a;let{optimizationId:d,optimizationName:m,editorSelectedVariantIndex:v}=a;const g=(0,n.useSelect)((e=>e("core/block-editor").getBlocks(t)),[t]);if(void 0===d){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=16;d="";for(let i=0;i<e;i++)d+=t.charAt(Math.floor(Math.random()*t.length));p({optimizationId:d})}return void 0===m&&(m=d),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.InspectorControls,{children:(0,o.jsxs)(l.PanelBody,{title:(0,e.__)("Settings","planet4-gpch-plugin-optimize"),children:[(0,o.jsx)(l.ToggleControl,{checked:!!h,label:(0,e.__)("Enable/Disable the Optimization","planet4-gpch-plugin-optimize"),onChange:()=>p({status:!h}),help:(0,e.__)("Disabling the Optimization will show the first variant to everyone.","planet4-gpch-plugin-optimize")}),(0,o.jsxs)("p",{children:[(0,o.jsx)("b",{children:"Optimization ID: "}),d||""]}),(0,o.jsx)(l.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,e.__)("Experiment Name","planet4-gpch-plugin-optimize"),value:m||"",onChange:t=>{/^[A-Za-z0-9 -]*$/.test(t)?p({optimizationName:t}):alert((0,e.__)("Please use only letters, numbers, spaces and dashes.","planet4-gpch-plugin-optimize"))},help:(0,e.__)("Used to identify the Optimization in Mixpanel. Feel free to use a readable name. Don't change once the experiment has started!","planet4-gpch-plugin-optimize")})]})}),(0,o.jsxs)("div",{...(0,i.useBlockProps)(),children:[(0,o.jsxs)("div",{className:"variant-selector-container",children:[(0,o.jsxs)("p",{className:"optimization-info",children:[(0,o.jsxs)("strong",{children:[(0,e.__)("Content Optimization:","planet4-gpch-plugin-optimize")," ",m]}),m===d&&(0,o.jsx)("span",{children:(0,e.__)("(Feel free to set a human redable name!)","planet4-gpch-plugin-optimize")})]}),(0,o.jsxs)("div",{className:"variant-buttons",children:[g.length>0?g.map(((t,e)=>(0,o.jsx)(l.Button,{__next40pxDefaultSize:!0,variant:"secondary",icon:r,iconSize:20,className:"variant-button "+(v===e?"is-active":""),onClick:()=>(t=>{for(const[e,i]of g.entries())e===t&&(p({editorSelectedVariantId:i.attributes.variantId,editorSelectedVariantIndex:e}),wp.data.dispatch("core/block-editor").selectBlock(i.clientId))})(e),children:t.attributes.variantName},e))):(0,o.jsx)(o.Fragment,{}),(0,o.jsx)(l.Button,{__next40pxDefaultSize:!0,variant:"primary",icon:s,className:"add-variant-button",onClick:()=>{const e=wp.blocks.createBlock("planet4-gpch-plugin-optimize/variant",{variantName:`Variant ${g.length+1}`});wp.data.dispatch("core/editor").insertBlock(e,g.length,t)},children:(0,e.__)("Add Variant","planet4-gpch-plugin-optimize")})]}),!0!==h&&(0,o.jsx)("p",{className:"optimization-disabled",children:(0,e.__)("This content optimization is disabled. The website shows the first variant.","planet4-gpch-plugin-optimize")})]}),(0,o.jsx)("div",{className:"variant-content",children:(0,o.jsx)(i.InnerBlocks,{template:c})})]})]})},save:function({attributes:t}){return(0,o.jsx)("div",{...i.useBlockProps.save({className:"gp-optimize-container"}),"data-status":t.status,"data-optimization-id":t.optimizationId,"data-optimization-name":t.optimizationName,children:(0,o.jsx)(i.InnerBlocks.Content,{})})}})}},i={};function n(t){var a=i[t];if(void 0!==a)return a.exports;var o=i[t]={exports:{}};return e[t](o,o.exports,n),o.exports}n.m=e,t=[],n.O=(e,i,a,o)=>{if(!i){var s=1/0;for(p=0;p<t.length;p++){for(var[i,a,o]=t[p],l=!0,r=0;r<i.length;r++)(!1&o||s>=o)&&Object.keys(n.O).every((t=>n.O[t](i[r])))?i.splice(r--,1):(l=!1,o<s&&(s=o));if(l){t.splice(p--,1);var c=a();void 0!==c&&(e=c)}}return e}o=o||0;for(var p=t.length;p>0&&t[p-1][2]>o;p--)t[p]=t[p-1];t[p]=[i,a,o]},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={306:0,966:0};n.O.j=e=>0===t[e];var e=(e,i)=>{var a,o,[s,l,r]=i,c=0;if(s.some((e=>0!==t[e]))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(r)var p=r(n)}for(e&&e(i);c<s.length;c++)o=s[c],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(p)},i=globalThis.webpackChunkplanet4_gpch_pluigin_optimize=globalThis.webpackChunkplanet4_gpch_pluigin_optimize||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var a=n.O(void 0,[966],(()=>n(886)));a=n.O(a)})();